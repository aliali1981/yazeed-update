<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ูุฏุฑุณุฉ ูุฒูุฏ ุจู ุงูุญุงุฑุซ - ุชุญุฏูุซ ุงูุจูุงูุงุช</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-firestore-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.full.min.js"></script>

    <style>
        :root { --primary: #004a99; --secondary: #28a745; --bg: #f4f7f9; --accent: #ffc107; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg); margin: 0; padding: 15px; text-align: right; }
        .container { max-width: 900px; margin: 10px auto; background: #fff; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 6px solid var(--primary); }
        .header-logos { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .logo { width: 85px; height: auto; }
        .header-text { text-align: center; margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 15px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #333; }
        select, input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 15px; box-sizing: border-box; font-family: inherit; }
        .hidden { display: none; }
        .btn-submit { width: 100%; padding: 15px; background: var(--secondary); color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-submit:hover { opacity: 0.9; }
        
        /* ููุญุฉ ุงูุชุญูู */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 25px; }
        .stat-card { background: white; border: 1px solid #ddd; border-radius: 10px; padding: 12px; box-shadow: 2px 2px 8px rgba(0,0,0,0.05); }
        .progress-bar { width: 100%; background: #eee; height: 8px; border-radius: 4px; margin-top: 8px; overflow: hidden; }
        .progress-fill { background: var(--secondary); height: 100%; transition: width 0.5s; }
        .admin-header { display: flex; justify-content: space-between; align-items: center; background: var(--primary); color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 13px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: right; }
        th { background: #f8f9fa; color: var(--primary); }
        .search-box { width: 100%; padding: 12px; margin-bottom: 20px; border: 2px solid var(--primary); border-radius: 8px; }
        .admin-login-btn { background: none; border: none; color: #eee; cursor: pointer; float: left; font-size: 10px; }
    </style>
</head>
<body>

<div class="container" id="userView">
    <button class="admin-login-btn" onclick="openAdmin()">Login</button>
    <div class="header-logos">
        <img src="ูุฒุงุฑุฉ ุงูุชุนููู.png" alt="ูุฒุงุฑุฉ ุงูุชุนููู" class="logo">
        <img src="logo.png" alt="ุดุนุงุฑ ุงููุฏุฑุณุฉ" class="logo">
    </div>
    <div class="header-text">
        <h2 style="color: var(--primary); margin:0;">ูุฏุฑุณุฉ ูุฒูุฏ ุจู ุงูุญุงุฑุซ ููุชุนููู ุงูุฃุณุงุณู</h2>
        <p>ุชุญุฏูุซ ูุงุนุฏุฉ ุจูุงูุงุช ุฃุฑูุงู ุงูููุงุชู (2025-2026)</p>
    </div>

    <form id="updateForm">
        <div class="form-group">
            <label>1. ุงุฎุชุฑ ุงูุตู ุงูุฏุฑุงุณู:</label>
            <select id="classSelect" required onchange="populateStudents(this.value)">
                <option value="" disabled selected>-- ุญุฏุฏ ุงูุตู --</option>
                <option value="5_1">ุฎุงูุณ / 1</option><option value="5_2">ุฎุงูุณ / 2</option><option value="5_3">ุฎุงูุณ / 3</option>
                <option value="6_1">ุณุงุฏุณ / 1</option><option value="6_2">ุณุงุฏุณ / 2</option>
                <option value="7_1">ุณุงุจุน / 1</option><option value="7_2">ุณุงุจุน / 2</option><option value="7_3">ุณุงุจุน / 3</option>
                <option value="8_1">ุซุงูู / 1</option><option value="8_2">ุซุงูู / 2</option>
            </select>
        </div>
        <div class="form-group hidden" id="studentGroup">
            <label>2. ุงุณู ุงูุทุงูุจ:</label>
            <select id="studentSelect" required></select>
        </div>
        <div id="dataFields" class="hidden">
            <div class="form-group"><label>3. ุตูุฉ ุงููุฑุงุจุฉ:</label>
                <select id="relation"><option>ุงูุฃุจ</option><option>ุงูุฃู</option><option>ููู ุงูุฃูุฑ</option></select>
            </div>
            <div class="form-group"><label>4. ุฑูู ุงููุงุชู ุงูุฌุฏูุฏ:</label>
                <input type="tel" id="newPhone" placeholder="ุฅุฏุฎุงู 8 ุฃุฑูุงู" maxlength="8" required pattern="[97][0-9]{7}">
            </div>
            <button type="submit" class="btn-submit" id="submitBtn">ุฅุฑุณุงู ูุชุญุฏูุซ ุงูุจูุงูุงุช</button>
        </div>
    </form>
</div>

<div class="container hidden" id="adminView" style="max-width: 1100px;">
    <div class="admin-header">
        <h3 style="margin:0;">ููุญุฉ ุชุญูู ูุฏุฑุณุฉ ูุฒูุฏ</h3>
        <button onclick="location.reload()" style="background:white; color:red; border:none; padding:5px 15px; border-radius:5px; cursor:pointer;">ุฎุฑูุฌ</button>
    </div>

    <div class="stats-grid" id="statsContainer"></div>

    <div style="display:flex; gap:10px; margin-bottom:20px;">
        <input type="text" id="adminSearch" class="search-box" placeholder="๐ ุงุจุญุซ ุนู ุงุณู ุทุงูุจ ุฃู ุฑูู ูุงุชู..." onkeyup="searchTable()">
        <button onclick="exportToExcel()" style="background:var(--secondary); color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-weight:bold; white-space:nowrap;">๐ฅ ุชุตุฏูุฑ Excel</button>
    </div>

    <div style="overflow-x:auto; background:white; border-radius:10px;">
        <table id="dataTable">
            <thead>
                <tr>
                    <th>ุงูุชุงุฑูุฎ</th>
                    <th>ุงูุตู</th>
                    <th>ุงุณู ุงูุทุงูุจ</th>
                    <th>ุงูุฑูู ุงููุญุฏุซ</th>
                    <th>ุงูุตูุฉ</th>
                </tr>
            </thead>
            <tbody id="adminTableBody"></tbody>
        </table>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBQsjvkdmYaR6OOGAbG-WdqIJCiHbw_Avo",
        authDomain: "madrassa-yazeed.firebaseapp.com",
        databaseURL: "https://madrassa-yazeed-default-rtdb.firebaseio.com",
        projectId: "madrassa-yazeed",
        storageBucket: "madrassa-yazeed.firebasestorage.app",
        messagingSenderId: "1025900552589",
        appId: "1:1025900552589:web:1634648a6b6a8b4b05ddc4",
        measurementId: "G-6E4JMBVCED"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const classTotals = { "5_1": 20, "5_2": 22, "5_3": 16, "6_1": 27, "6_2": 27, "7_1": 25, "7_2": 27, "7_3": 26, "8_1": 32, "8_2": 30 };

    const studentsData = {
        "5_1": ["ุฃุญูุฏ ุจู ุณุงูู ุจู ุณุนูุฏ ุญุณู ุฎูุงุฑ", "ุงูุงููู ูุญูุฏ ุงุญูุฏ ุงูุทูุจ", "ุชุฑูู ุจู ูุญูุฏ ุจู ุณุนูุฏ ูุณูู ูุณู", "ุฎุงูุฏ ุจู ุฑุงุดุฏ ุจู ุณุนูุฏ ุณุงูู ูุณู", "ุณุงูู ุจู ูุญูุฏ ุจู ุณุงูู ุตุงูุญ ุฌุฏุงุฏ", "ุณุงูู ุจู ูุณูู ุจู ุณููู ูุญูุฏ ุงูุฑุงุดุฏู", "ุณุนูุฏ ุจู ุณุงูู ุจู ุธูููุฑ ุณุงูู ุฌุฏุงุฏ", "ุณุนูุฏ ุจู ุดูุงุจ ุจู ูุงูุน ูุณูู ุงููุณููู ุงููุซูุฑู", "ุณุนูุฏ ุจู ุนุจุฏุงููู ุจู ุจูุงู ุฎููุฏุน ุฎูุงุฑ", "ุณูุทุงู ุจู ูุญูุฏ ุจู ุนูู ูููู ุงูุนุงูุฑู", "ุนุงูุฑ ุจู ุณููู ุจู ุนุงูุฑ ุณูููู ููุตูุช", "ุนุจุฏุงูุฑุญูู ุงุญูุฏ ููุฒู ุนุจุฏุงููุชุงุญ", "ุนูู ุจู ุณุนุฏ ุจู ูุณูู ุณุนูุฏ ุงูุฑุงุดุฏู", "ุนูุถ ุจู ูุญูุฏ ุจู ุนูุถ ุฎุงุฏู ุงููููุจู", "ุบุงูู ุจู ูุญูุฏ ุจู ุณููู ูุณูู ุงูุฌููุจู", "ุบุงูู ุจู ูุญูุฏ ุจู ูุจุงุฑู ุจุฎูุช ุฌุฏุงุฏ", "ูุญูุฏ ุงุญูุฏ ูุญููุฏ ุนุจุฏุงูุญููุฏ", "ูุญูุฏ ุจู ูุณูู ุจู ูุญูุฏ ุจุฎูุช ูุณู", "ูุงูู ุจู ูุญูุฏ ุจู ุณุงูู ุณููู ูุณู", "ููุฏุงู ุจู ุงุญูุฏ ุจู ุนุจุฏุงููู ูุญูุฏ ุฌุฏุงุฏ"],
        "5_2": ["ุฃุญูุฏ ุจู ุณุนูุฏ ุจู ูุณูู ุฃุญูุฏ ุฌุฏุงุฏ", "ุฃูุฌุฏ ุจู ุณุนูุฏ ุจู ุฎููุณ ุณุนูุฏ ุงูุดูููู", "ุงูุจุฑุงุก ุงุญูุฏ ุณููุญ ุนูู ุณูุฏ", "ุฎุงูุฏ ุจู ุฃุญูุฏ ุจู ูุณูู ูุญูุฏ ูุณู", "ุฎุงูุฏ ุจู ูุญูุฏ ุจู ูุณูู ุณูููุฑ ุฎูุงุฑ", "ุณุงูู ุจู ุญูุฏ ุจู ูุจุฎูุช ุญูุงุฏู ุฌุฏุงุฏ", "ุณุงูู ุจู ุนูุถ ุจู ุณุงูู ูุญูุฏ ูุณู", "ุณุงูู ุจู ูุงูู ุจู ุณุงูู ุนูุถู ุฌุฏุงุฏ", "ุณุนูุฏ ุจู ุจุฎูุช ุจู ุนุจุฏู ุจุฎูุช ุฎูุงุฑ", "ุณุนูุฏ ุจู ุฎุงูุฏ ุจู ุจุฎูุช ุฒุงูุฏ ูุณู", "ุณุนูุฏ ุจู ุตุงูุญ ุจู ุณููู ุนูู ุจูุช ุฌุฏุงุฏ", "ุณููุงู ุจู ูุงุฌู ุจู ุณุงูู ุณุนุฏ ุฎูุงุฑ", "ุณููู ุจู ูุนูุฑ ุจู ุณููู ูุณูู ุฌุฏุงุฏ ุงููุซูุฑู", "ุตุงูุญ ูุญูู ูุณูู", "ุตูุฑ ุจู ูุญูุฏ ุจู ุงูุนุจุฏ ุณููู ุฌุฏุงุฏ", "ุนุจุฏุงูุฑุญูู ุณุงูู ูุญูุฏ ุงุญูุฏ ููุณู ุงููุฒูู", "ูุญูุฏ ุจู ุจุฎูุช ุจู ุงุญูุฏ ูุญูุฏ ูุณู", "ูุญูุฏ ุจู ุณุงูู ุจู ุณููู ูุทุฑ ุฌุฏุงุฏ", "ูุญูุฏ ุจู ุนุงูุฑ ุจู ูุญูุฏ ุงุญูุฏ ุงููุณููู", "ูุญูุฏ ุจู ุบุงุฒู ุจู ูููุด ุฌุนูุฏ ุฌุฏุงุฏ ุงููุซูุฑู", "ูุญูุฏ ุจู ููุฏ ุจู ุณุงูู ุฎููุชู ูุณู", "ูุณูู ุจู ุจุฎูุช ุจู ุนุจุฏู ุจุฎูุช ุฎูุงุฑ"],
        "5_3": ["ุฅููุงุณ ุจู ุงุจุฑุงููู ุจู ุญูุฏ ูุณุนูุฏ ุงูุนุงูุฑู", "ุชูููุฑ ุจู ุฃุญูุฏ ุจู ูุจุฑูู ุฃุญูุฏ ูุณู", "ุฎุงูุฏ ุฃุญูุฏ ุญุณู ุงูุชุงุจุนู", "ุฎุงูุฏ ุจู ุนูุฑู ุจู ุบููู ุณุงูู ุฎูุงุฑ", "ุณุงูู ุจู ุนูุงุฏ ุงูููุณุงูู", "ุดูุงุจ ุจู ุญูุฏ ุจู ูุญูุฏ ุญูุฏ ุงูููุงุฆู", "ุนุจุฏุงููู ุจู ูุญูุฏ ุจู ุนูุธู ุณุนูุฏ ุฌุฏุงุฏ ุงููุซูุฑู", "ููุฏ ุจู ูุญูุฏ ุจู ุณุงูู ูุณูู ุงููุณููู", "ููุตู ุจู ุญูุฏ ุจู ูุญูุฏ ุญูุฏ ุงูููุงุฆู", "ูุงุฒู ูุตุทูู ูุญูุฏ ุงุญูุฏ ุนูู", "ูุญูุฏ ุจู ุญุณูู ุจู ุณุงูู ูุจุฎูุช ุฎูุงุฑ", "ูุญูุฏ ุจู ุณุนูุฏ ุจู ุณุงูู ุฎููุชู ูุณู", "ูุฑูุงู ุณูุงูู ุญุณูู ุนูู ุดููู", "ูุณูู ุจู ุณุนูุฏ ุจู ุณุนุฏ ุณุนูุฏ ุฌุฏุงุฏ", "ูุณูู ุจู ูุญูุฏ ุจู ูุณูู ุงุญูุฏ ุฌุฏุงุฏ", "ููุซู ุจู ููุงุฒ ุจู ุณูููุงู ุนุจุฏุงููู ุงููุงุดูู"],
        "6_1": ["ุงูุฎุทุงุจ ูุญูุฏ ุญูุฏ ุงูููู ุงุญูุฏ", "ุงูุฎููู ุจู ุบุณุงู ุจู ุทุงูุจ ุจุฏุฑ ุงูุตูุตุงูู", "ุงููุฌุฑุณ ุจู ุณูููุงู ุจู ูุจุงุฑู ุณูููุงู ุงูุญุจุณู", "ุงูุณ ูุญููุฏ ูุญูุฏ ุงุญูุฏ", "ุงูุงุจ ุนุจุฏุงูุนุธูู ุญุณูู ุงูุทุงูุฑ", "ุญุณูู ูุญูุฏ ููุณู ุฎุถุฑ", "ุณุงูู ุจู ุซุงูู ุจู ูุญูุฏ ุจุฎูุช ุฎูุงุฑ", "ุณุงูู ุจู ุญููุฏ ุจู ุณุงูู ุณุนูุฏ ุงููุงุฆูู", "ุณุงูู ุจู ูุญูุฏ ุจู ุณุงูู ุนุจุฏุงููู ุงูุฑุงุดุฏู", "ุณุนูุฏ ุจู ุนุจุฏุงูุนุฒูุฒ ุจู ุจุฎูุช ุญู ูุณู", "ุณุนูุฏ ุจู ุญุงุชู ุจู ุณุนูุฏ ูุญูุฏ ุจูุช ูุณู", "ุณุนูุฏ ุจู ูุณูู ุจู ุณุนูุฏ ุณููู ูุณู", "ุณููู ุจู ุณููู ุจู ุณููู ุณููู ููุตูุช", "ุณููู ูุญุณู ุณููู ุงู ุฎูุงุฑ", "ุณูู ุจู ุฎููุณ ุจู ุณุงูู ูุญูุฏ ุงูุฌููุจู", "ุณูู ุจู ูุงุฆู ุจู ุนุจุฏุงููู ูุจุงุฑู ุฌุฏุงุฏ", "ุนุจุฏ ุงูุฑุญูู ุจู ูุญูุฏ ุจู ุณุนูุฏ ุณุงูู ูุณู", "ุนุจุฏุงููู ุจู ุบุงูู ุจู ุณุงูู ุนุจุฏุงููู ุงูุฑุงุดุฏู", "ุนุจุฏุงููู ุจู ูุญูุฏ ุจู ุงุญูุฏ ุฑูููุงู ุฎูุงุฑ", "ุนุจุฏุงููู ุนูุงุถ ุนุจุฏุงููู ุนุจุฏุงููุทูู", "ุนูู ุจู ุญุงูุฏ ุจู ูุณูู ูุญูุฏ ูุณู ุงููุซูุฑู", "ุนูู ุจู ุณุนูุฏ ุจู ูุญูุฏ ุณุงูู ุฎูุงุฑ", "ูุจุฑูู ุจู ูุญูุฏ ุจู ุณุงูู ุธูููุฑ ุฌุฏุงุฏ", "ูุชุนุจ ุจู ุณุนูุฏ ุจู ุนุจุฏุงููู ูุญูุฏ ุฌุฏุงุฏ", "ูุญูุฏ ุจู ุฌููู ุจู ุนุจุฏู ุจุฎูุช ุฎูุงุฑ", "ูุณูู ุจู ุจุฏุฑ ุจู ูุณูู ุณุนูุฏ ูุณู", "ูุณูู ุจู ูุญูุฏ ุจู ูุณูู ุณุนูุฏ ุฌุฏุงุฏ"],
        "6_2": ["ุงูููุซ ุจู ุฅุจุฑุงููู ุจู ูุงุตุฑ ุนูู ุงูุญูุณูู", "ุงููุบูุฑู ุจุดุฑู ูุญุฌูุจ ุงุญูุฏ", "ุจุฎูุช ุจู ุณุนูุฏ ุจู ูุจุงุฑู ุจุฎูุช ุฌุฏุงุฏ", "ุณุงูู ุจู ุงุญูุฏ ุจู ุณููู ุณุงูู ุฎูุงุฑ", "ุณุงูู ุจู ุญุงุชู ุจู ุณุงูู ุณุนุฏ ุฎูุงุฑ", "ุณุงูู ุจู ุณูุทุงู ุจู ุณูููู ุบุงูู ุงูุฑุงุดุฏู", "ุณุงูู ุจู ุณููู ุจู ุณุงูู ุงููุญูุงุก ุฌุฏุงุฏ", "ุณุนุฏ ุจู ูุฑุงูู ุจู ุณุงูู ุนูู ุฎูุงุฑ", "ุณุนูุฏ ุจู ุนุงุฏู ุจู ุณุงูู ุฎููุชู ูุณู ุจูุช ูุซูุฑ", "ุณูุทุงู ุจู ูุณูู ุจู ุณูุทุงู ุงุณุฏ ุงูุฑุงุดุฏู", "ุนุงูุฑ ุจู ุฎุงูุฏ ุจู ุณุงูู ูุณู", "ุนุจุฏุงููู ุจู ุญุณูู ุจู ุนูู ูุญูุฏ ุงู ุนุจุฏุงูุณูุงู", "ุนุจุฏุงููู ุจู ุนุจุฏู ุจู ุจุฎูุช ุฒููุฉ ุฎูุงุฑ", "ุนุจุฏุงููู ุณุนูุฏุงู ุณูุนุฏ ุงูุฑุงุดุฏู", "ุบุงุฒู ุจู ูุญูุฏ ุจู ุตุงูุญ ุงุญูุฏ ุฌุฏุงุฏ", "ุบูุซ ุจู ุงุญูุฏ ุจู ุจุฎูุช ูุนููู ุงููุณููู", "ูุงุฒู ุชุงูุฑ ูุญูุฏ ูุญูุฏ ุนููุด", "ูุงุฒู ุนุจุฏุงูุณููุน ุณูููุงู ุฎููุณ", "ูุงูุฑ ุจู ูุญูุฏ ุจู ูุณุชููู ูุญูุฏ ุตูุฑุงุฑ", "ูุญูุฏ ุจู ุนุจุฏุงููู ุจู ูุญูุฏ ุนุจุฏุงููู ุฎูุงุฑ", "ูุญูุฏ ุญุงูุธ ุณุนูุฏ ุฑุนููุช", "ูุญูุฏ ูุญุณู ุณููู ุงู ุฎูุงู", "ูุฏุฑู ุจู ุฎุงูุฏ ุจู ุณุนูุฏ ุจุฎูุช ุงูุดุนุดุนู", "ูุณูู ุจู ุณุงูู ุจู ุนุจุฏุงููู ุณุนูุฏ ุงูุฑุงุดุฏู", "ูุณูู ุจู ูุญูุฏ ุจู ุณุนูุฏ ูุณูู ุฌุฏุงุฏ", "ููุณู ุจู ูุญูุฏ ุจู ุจุฎูุช ุณุงูู ุฎูุงุฑ", "ููุณู ุนูุงุฏ ุงูููุณุงูู"],
        "7_1": ["ุงุญูุฏ ุงูุฌุฏ ุงุญูุฏ ุฃุญูุฏ ูุฌุงุฏ", "ุฃุญูุฏ ุจู ุณุนูุฏ ุจู ุตุงูุญ ุฃุญูุฏ ุฌุฏุงุฏ", "ุงูุนุจุฏ ุจู ูุญูุฏ ุจู ุงูุนุจุฏ ุฒุงุฆุฏ ูุณู", "ุงููุงุจู ุจู ูุญูุฏ ุจู ุณุงูู ุณููู ูุณู", "ุจุฎูุช ุจู ุงุญูุฏ ุจู ุจุฎูุช ูุฑูุญ ูุณู ุงููุซูุฑู", "ุชููู ุจู ูุญูุฏ ุจู ุณููู ุฌุฏูุฏ ุฌุฏุงุฏ ุงููุซูุฑู", "ุชููู ุจู ูุญูุฏ ุจู ูุจุฑูู ุนุจุฏุงููู ุงููุณููู", "ุญูุฏ ุจู ูุญูุฏ ุจู ุงุญูุฏ ุงููุฒุงุฑ ุงููุซูุฑู", "ุญูุฏ ุจู ูุญูุฏ ุจู ุณุนูุฏ ูุณู", "ุฑุงุดุฏ ุจู ูุญูุฏ ุจู ุฃุญูุฏ ูุญูุฏ ูุณู ุงููุซูุฑู", "ุณุงูู ุจู ุณุนุฏ ุจู ุตูุงุญ ุฑุนููุช", "ุณุนูุฏ ุจู ุดูุงุจ ุจู ุงุญูุฏ ูุญูุฏ ูุณู", "ุณุนูุฏ ุจู ูุญูุฏ ุจู ุตุงูุญ ุฌุฏุงุฏ", "ุณุนูุฏ ุจู ูุญูุฏ ุจู ูุจุงุฑู ุจุฎูุช ุฌุฏุงุฏ", "ุณูุทุงู ุจู ุญูุฒุฉ ุจู ูุณูู ููู ุฑุจุนุงุช ุงููุซูุฑู", "ุนุงูุฑ ุจู ูุญูุฏ ุจู ูุณูู ุจุฎูุช ุงููุณููู", "ุนุจุฏุงููู ุจู ุณุงูู ุจู ุณููู ุณููู ููุตูุช", "ุนูุฑ ุงุญูุฏ ูุญูุฏ ุงุญูุฏ", "ุนูุฑ ุนุจุฏุงูููู ุงุจุฑุงููู ุงุจุฑุงููู", "ูุฑูุญ ุจู ุนุจุฏุงููู ุจู ูุฑูุญ ุงุญูุฏ ูุณู", "ูุฌุชุจู ุนูุณู ูุญูุฏ", "ูุณูู ุจู ูุญูุฏ ุจู ุนูุถ ุฎุงุฏู ุงููููุจู", "ูุตุฑ ุจู ุณุงูู ุจู ุธูููุฑ ุณุงูู ุฌุฏุงุฏ", "ูุงุณุฑ ุจู ุนุงุฏู ุจู ุณุงูู ูุณู ุจูุช ูุซูุฑ", "ููุณู ุนูุฑ ุงุญูุฏ ุนุจุฏ ุงูุฑุญูู ุญุงูู"],
        "7_2": ["ุงุจุฑุงููู ูุญูุฏ ุณุงูู ุงูุณุทุฑู", "ุงูุนุจุงุณ ุจู ูุจุฎูุช ุจู ุณุงูู ูุณู ุจูุช ูุซูุฑ", "ุงูููุฐุฑ ุจู ููุงุฒ ุจู ุณูููุงู ุนุจุฏุงููู ุงููุงุดูู", "ุงููุฑ ุจู ูุงุตุฑ ุจู ุนุจุฏุงูุฑุญูู ุนุจุฏุงููู ุงูุจููุดู", "ุญุณูู ุณูุงูู ุญุณูู ุนูู ุดููู", "ุฎุงูุฏ ุจู ุณุงูู ุจู ุนูู ุนุจุฏุงููู ุงูุนููู", "ุฎุงูุฏ ุจู ูุญูุฏ ุจู ุณููู ูุทุฑ ุฌุฏุงุฏ", "ุฎุงูุฏ ุจู ูุณูู ุจู ุฃุญูุฏ ุฌุฏุงุฏ", "ุฑููุฒู ุจู ูุณูู ุจู ุจุฎูุช ุฑููุฒู ุตูุฏู ุงููุญุฑูู", "ุณุงูู ุจู ูุจุงุฑู ุจู ุณููู ูุญูุฏ ุงูุฑุงุดุฏู", "ุณุนุฏ ุจู ูุญูุฏ ุจู ุณุนุฏ ุญููุธ ุฎูุงุฑ", "ุณุนูุฏ ุจู ุนุจุฏุงููู ุจู ุจุฎูุช ุฒุงูุฏ ูุณู", "ุณุนูุฏ ุจู ุนุจุฏุงููู ุจู ุณุงูู ุงุญูุฏ ุฌุฏุงุฏ", "ุณุนูุฏ ุจู ูุณูู ุจู ุนุจุฏุงููู ุณุนูุฏ ุฌุฏุงุฏ", "ุณูุทุงู ุจู ูุณูู ุจู ุณุงูู ุตุงูุญ ุฌุฏุงุฏ", "ุนุจุฏุงููู ุจู ุนุงุฑู ุจู ุณุงูู ุฌุฏุงุฏ", "ุนูู ุจู ุณุนูุฏ ุจู ุนูู ุฎูุงุฑ", "ุนูุฑ ูุคุงุฏ ูููู ูุญูุฏ ูุคุงุฏ", "ููุฏ ุจู ุบุงูู ุจู ุณุงูู ุฌุฏุงุฏ", "ูุญุณู ูุนุชุตู ูุญูุฏ ุงูุงูุงู", "ูุญูุฏ ุจู ุณุงูู ุจู ูุจุฎูุช ูุญูุฏ ุงูุฑุงุดุฏู", "ูุณูู ุจู ุณุงูู ุจู ุณููู ุงูุฑุงุดุฏู", "ูุตุทูู ูุญููุฏ ูุฑูู ุงุจุฑุงููู ุงุญูุฏ", "ูุนุงุฐ ุงุญูุฏ ุณููุญ ุนูู ุณูุฏ", "ูููู ุจู ุณุนูุฏ ุจู ูุญูุฏ ุณุงูู ุฌุฏุงุฏ", "ูุงุฏู ุจู ุณุนูุฏ ุจู ูุงุฏู ุญุณู ุดุญุฑู ุฎูุงุฑ", "ูุงุฆู ุจู ุญููุฏ ุจู ุณุงูู ุณุนูุฏ ุงููุงุฆูู"],
        "7_3": ["ุฃุญูุฏ ุจู ูุงุฆู ุจู ุนุจุฏุงููู ูุญูุฏ ุฌุฏุงุฏ", "ุงูุทูุญ ุจู ุณุงูู ุจู ุญุณู ุนูู ุฎูุงุฑ", "ุจุฎูุช ุจู ูุณูู ุณุงูู ูุจุฎูุช ุงูุฑุงุดุฏู", "ุจุฏุฑ ุจู ุนุงูุฑ ุจู ูุณูู ุงูุฑุญุงุจู ุฌุฏุงุฏ", "ุญุซูุซ ุจู ุณูุทุงู ุจู ูุญูุฏ ุณููู ูุณู", "ุญูุฏ ุจู ูุญูุฏ ุจู ุนุจุฏุงููู ูุญูุฏ ุฌุฏุงุฏ ุงููุซูุฑู", "ุณุงูู ุจู ุงุญูุฏ ุจู ุณุงูู ุฌุฏุงุฏ", "ุณุนูุฏ ุจู ูุจุฑูู ุจู ุณุงูู ุนุงูุฑ ุงููุณููู", "ุณููู ุจู ุนุจุฏุงููู ุจู ุณููู ุญุงูุธ ุฎูุงุฑ", "ุนุจุฏ ุงููู ุฃููุฑ ุนุจุฏุงููู ูุตุฑ", "ุนุจุฏุงููู ุจู ูุญูุฏ ุจู ุนูู ูููู ุงูุนุงูุฑู", "ุนูู ุจู ุซุงูู ุจู ุนูู ุณุงูู ุฌุฏุงุฏ ุจูุช ูุซูุฑ", "ูุงุฑุณ ุฒูุงุฏ ูุญูุฏ ุงุจู ุฑูุงุน", "ูุจุงุฑู ุจู ุณุนูุฏ ุจู ุณุงูู ุฎููุชู ูุณู", "ูุญุณู ุจู ุนููู ุจู ุณุงูู ุณุนุฏ ุฎูุงุฑ", "ูุญูุฏ ุจู ุจุฎูุช ุจู ูุฑุฌ ุงูุณูุญ ุดููุงู ุงูููุฑู", "ูุญูุฏ ุจู ุนูู ุจู ุจุฎูุช ูุญูุฏ ุงูุฑุงุดุฏู", "ูุญูุฏ ุจู ุบุงูู ุจู ุงูุฑุถู ุณูุงูู ุฌุฏุงุฏ", "ูุญูุฏ ุจู ูุณูู ุจู ูุญูุฏ ูุณูู ุฌุฏุงุฏ", "ูุญูุฏ ุจู ูุงุตุฑ ุจู ุนุจุฏุงููู ุฌุฏุงุฏ", "ูุญูุฏ ุจู ููุซู ุจู ุณุงูู ูุงุฆู ุฌุฏุงุฏ ุงููุซูุฑู", "ูุณูู ุจู ุญุณู ุจู ูุงุฏู ุญุณู ุดุญุฑู ุฎูุงุฑ", "ูุนุงุฐ ูุคุงุฏ ุงูุญููุด ุงูุงุญูุฏ", "ูุงุตุฑ ุจู ุนูู ุจู ูุงุตุฑ ุณููู ุฌุฏุงุฏ", "ููุฑ ุงูุฏูู ูุญุณู ุงูุนูู", "ููุซู ุจู ูุญูุฏ ุจู ุณุงูู ูุงุฆู ุฌุฏุงุฏ"],
        "8_1": ["ุฃุญูุฏ ุจู ุณุนูุฏ ุจู ุจุฎูุช ุตูุฏู ุงููุญุฑูู", "ุฃุญูุฏ ุจู ุนุงูุฑ ุจู ูุญูุฏ ุณุงูู ุฎูุงุฑ", "ุฃุญูุฏ ุจู ูุญูุฏ ุจู ุณุงูู ูุจุงุฑู ุงููุณููู", "ุงููุฑ ุจู ุบุงูู ุจู ูุญูุฏ ุณููู ุงููุณููู ุงููุซูุฑู", "ุงูุงุฏ ุงุญูุฏ ุชูููู ุนุจุงุณ ูุตุทูู", "ุจุฎูุช ุจู ุฎุงูุฏ ุจู ุจุฎูุช ุฒุงูุฏ ูุณู", "ุจุฎูุช ุจู ุณุนูุฏุงู ุจู ุจุฎูุช ุฑููุฒู ุตูุฏู ุงููุญุฑูู", "ุญุงูู ุจู ููุฏ ุจู ุณุงูู ุฎููุชู ูุณู", "ุญุฑูุฒ ุจู ูุญุณู ุจู ุตุงูุญ ุญุฑูุฒ ุฎูุงุฑ", "ุญูุฏ ุจู ูุญูุฏ ุจู ุงูุนุจุฏ ุณููู ุฌุฏุงุฏ", "ุญูุฏ ุจู ูุญูุฏ ุจู ุณุนุฏ ุณุนูุฏ ุฌุฏุงุฏ", "ุญูุฏุงู ุจู ูุญูุฏ ุจู ุนุจุฏุงููู ูุญูุฏ ุฌุฏุงุฏ", "ุฒุงูุฏ ุจู ูุญูุฏ ุจู ูุณูู ุณุนูุฏ ุฌุฏุงุฏ", "ุณุนูุฏ ุจู ุฃุญูุฏ ุจู ูุญูุฏ ุงูุทูู ุงููุฒุงุฑ ุงููุซูุฑู", "ุณุนูุฏ ุจู ุญุงุชู ุจู ุณุนูุฏ ูุญูุฏ ุจูุช ูุณู", "ุณุนูุฏ ุจู ูุญูุฏ ุจู ุตุงูุญ ุงุญูุฏ ุฌุฏุงุฏ", "ุณุนูุฏ ุจู ุนุจุฏุงููู ุจู ูุจุฎูุช ุญูุงุฏู ุฌุฏุงุฏ", "ุณููู ุจู ุตุงูุญ ุจู ุจุฎูุช ุตุงูุญ ูููู ุฎูุงุฑ", "ุณููู ุจู ูุญุณู ุจู ุณููู ูุญููุธ ุฎูุงุฑ", "ุณููู ุจู ูุญูุฏ ุจู ุณุงูู ุนูู ุงูุญูุฑ", "ุณูู ุจู ุนุจุฏุงููู ุจู ูุณูู ูุญูุฏ ูุณู ุงููุซูุฑู", "ูุงุฆู ุจู ูุญูุฏ ุจู ูุงุฆู ูุทุฑ ุฌุฏุงุฏ", "ูุญูุฏ ุงุณูุงุนูู ุงุฏู ุนูู", "ูุญูุฏ ุจู ุณุงูู ุจู ุณุนูุฏ ุงููุญูุงุก ุฌุฏุงุฏ", "ูุญูุฏ ุจู ุณุนุฏ ุจู ูุณูู ุณุนูุฏ ุงูุฑุงุดุฏู", "ูุญูุฏ ุจู ูุณูู ุจู ุณุนูุฏ ุจุฎูุช ูุณู", "ูุญูุฏ ุจู ูุณูู ุจู ุณููู ูุทุฑ ุฌุฏุงุฏ", "ูุญูุฏ ูุตุทูู ุนุจุฏุงููุจู ุนุจุฏู", "ูุณูู ุจู ุญูุฏ ุจู ุณููู ูุณูู ุงูุฌููุจู", "ูุทุฑ ุจู ุนูู ุจู ุณุงูู ุนุงูุฑ ุงููุณููู", "ูุงุตุฑ ุจู ุณุงูู ุจู ูุญูุฏ ุงูุทูู ุงููุซูุฑู", "ุตุงูุญ ุฌุนูุฑ ุตุงูุญ ุนุจุฏ ุงููู"],
        "8_2": ["ุงูุฌููุฏู ุจู ููุธุงู ุจู ุณูููุงู ุณุงูู ุงููุงุตุฑู", "ุงูุฎุทุงุจ ูุญูุฏ ุตูุงุญ ูุญููุฏ", "ุชููู ุจู ููุซู ุจู ุงุญูุฏ ุณุนูุฏ ูุณู ุงููุซูุฑู", "ุฎุงูุฏ ุจู ูุญูุฏ ุจู ุณุงูู ุงุญูุฏ ุฌุฏุงุฏ", "ุฎุงูุฏ ุจู ูุงุฆู ุจู ุณุงูู ุนูุถู ุฌุฏุงุฏ", "ุฑูุงุถ ุจู ุจุฎูุช ุจู ูุฑุฌ ุดููุงู ุนุฒุงุจ", "ุณุงูู ุจู ุญุงูุฏ ุจู ูุณูู ูุญูุฏ ูุณู ุงููุซูุฑู", "ุณุงูู ุจู ุนุงูุฑ ุจู ุณุงูู ุธูููุฑ ุฌุฏุงุฏ", "ุณุงูู ุณููู ุณุงูู ูุฑุฌ ุงูุฎูุงุฑ", "ุณุนุฏ ุจู ุญุงูู ุจู ุฃุญูุฏ ุฎูุงุฑ", "ุณุนูุฏ ุจู ุณุงูู ุจู ุณุนูุฏ ุณููู ูุณู", "ุณุนูุฏ ุจู ูุงุฆู ุจู ุนุจุฏุงููู ูุญูุฏ ุฌุฏุงุฏ", "ุณุนูุฏ ุจู ุฑุงูุงู ุจู ูุณูู ูุญูุฏ ูุณู ุงููุซูุฑู", "ุตุงูุญ ุจู ุนูู ุจู ุตุงูุญ ุนูู ุงููุณููู", "ุทุงุฑู ุงุญูุฏ ุถุงุญู ุนุจุฏุงูุบูู ุญุณูู", "ุทูุงู ุจู ูุณูู ุจู ุณุนูุฏ ุณููู ูุณู", "ุนุงูุฑ ุจู ุงุญูุฏ ุจู ูุจุฎูุช ูุณูู ูููู ุฎูุงุฑ", "ุนุจุฏุงูุนุฒูุฒ ุจู ููุตู ุจู ุณุนูุฏ ูุญูุฏ ุงููุณููู", "ุนุจุฏุงููู ุจู ุณุงูู ุจู ุฃุญูุฏ ุตุงูุญ ูุณู", "ุนูู ุฌูุนุงู ุณุงูู ุณุนูุฏ ููุณู", "ุนูุฑ ุจู ูุญูุฏ ุจู ุณูููุงู ูุญูุฏ ุงูููุฏู", "ุบููู ุจู ุนูุฑู ุจู ุบููู ุณุงูู ุฎูุงุฑ", "ูุงูู ูููุฏ ูุญูุฏ ููุงุฏ", "ูุญูุฏ ุจู ุณุนูุฏ ุจู ุตุงูุญ ุฃุญูุฏ ุฌุฏุงุฏ", "ูุญูุฏ ุจู ูุณูู ุจู ุณููู ูุญูุฏ ุงูุฑุงุดุฏู", "ูุณูู ุจู ุงุญูุฏ ุจู ูุณูู ุงูุฑุญุงุจู ุฌุฏุงุฏ", "ูุงุตุฑ ุจู ูุฑุดุฏ ุจู ุจุฎูุช ุนุจุฏุงููู ูุณู", "ูุงู ุจู ูุญูุฏ ุจู ุณุงูู ุจุฎูุช ุงููุซูุฑู", "ููุณู ุจู ุณุงูู ุจู ุนุงูุฑ ุณูุงูู ุฌุฏุงุฏ", "ูุญูุฏ ุญุณูู ุงูุนูู"]
    };

    function populateStudents(cls) {
        const sel = document.getElementById('studentSelect');
        sel.innerHTML = '<option value="" disabled selected>-- ุงุฎุชุฑ ุงูุทุงูุจ --</option>';
        if(studentsData[cls]) {
            studentsData[cls].forEach(s => { let o = document.createElement('option'); o.value=s; o.innerText=s; sel.appendChild(o); });
            document.getElementById('studentGroup').classList.remove('hidden');
            document.getElementById('dataFields').classList.remove('hidden');
        }
    }

    document.getElementById('updateForm').onsubmit = async (e) => {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.disabled = true; btn.innerText = "ุฌุงุฑู ุงูุญูุธ...";
        try {
            await db.collection("updates").add({
                class: document.getElementById('classSelect').value,
                student: document.getElementById('studentSelect').value,
                phone: document.getElementById('newPhone').value,
                relation: document.getElementById('relation').value,
                at: new Date().toLocaleString('ar-OM')
            });
            alert("โ ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงูุทุงูุจ ุจูุฌุงุญ");
            location.reload();
        } catch(e) { alert("โ ุฎุทุฃ ูู ุงูุฅุฑุณุงู"); btn.disabled = false; }
    };

    function openAdmin() {
        if(prompt("ูููุฉ ุงูุณุฑ:") === "Yazeed2026") {
            document.getElementById('userView').classList.add('hidden');
            document.getElementById('adminView').classList.remove('hidden');
            loadAdminData();
        }
    }

    function loadAdminData() {
        db.collection("updates").orderBy("at", "desc").onSnapshot(snap => {
            const body = document.getElementById('adminTableBody');
            const stats = {}; body.innerHTML = "";
            snap.forEach(doc => {
                const d = doc.data();
                stats[d.class] = (stats[d.class] || 0) + 1;
                body.innerHTML += `<tr><td>${d.at}</td><td>${d.class.replace('_','/')}</td><td>${d.student}</td><td>${d.phone}</td><td>${d.relation}</td></tr>`;
            });
            renderStats(stats);
        });
    }

    function renderStats(counts) {
        const container = document.getElementById('statsContainer');
        container.innerHTML = "";
        for (let cls in classTotals) {
            let done = counts[cls] || 0;
            let total = classTotals[cls];
            let pc = Math.round((done/total)*100);
            container.innerHTML += `
                <div class="stat-card">
                    <div style="font-weight:bold; color:var(--primary); font-size:14px;">ุตู ${cls.replace('_','/')}</div>
                    <div style="font-size:12px; margin:5px 0;">ุชุญุฏุซ: ${done} | ูุชุจูู: ${total-done}</div>
                    <div class="progress-bar"><div class="progress-fill" style="width:${pc}%"></div></div>
                    <small style="color:var(--secondary); font-size:10px;">ุฅูุฌุงุฒ: ${pc}%</small>
                </div>`;
        }
    }

    function searchTable() {
        let q = document.getElementById('adminSearch').value.toLowerCase();
        let rows = document.getElementById('adminTableBody').rows;
        for(let r of rows) { r.style.display = r.innerText.toLowerCase().includes(q) ? "" : "none"; }
    }

    function exportToExcel() {
        let wb = XLSX.utils.table_to_book(document.getElementById('dataTable'));
        XLSX.writeFile(wb, "ุชุญุฏูุซุงุช_ูุฏุฑุณุฉ_ูุฒูุฏ.xlsx");
    }
</script>
</body>
</html>
